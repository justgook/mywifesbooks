---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import createSlug from "../../lib/createSlug";

const books = await getCollection('books');
const seriesSet = new Set<string>();
books.forEach(book => {
  if (book.data.series && book.data.series.trim() !== '') {
    seriesSet.add(book.data.series);
  }
});
const series = [...seriesSet].sort();
---

<BaseLayout title="Серии">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold mb-8">Серии</h1>
    <div class="flex flex-wrap gap-2">
      {series.map(s => (
        <a 
          href={`/series/${createSlug(s)}`}
          class="bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium px-2.5 py-0.5 rounded"
        >
          {s}
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
